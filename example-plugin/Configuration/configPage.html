<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Open Subtitles</title>
</head>
<body>
        <div id="ExamplePluginConfigurationPage" data-role="page" class="page type-interior pluginConfigurationPage" data-require="emby-input,emby-button,emby-select,emby-checkbox">
            <div data-role="content">
                <div class="content-primary">
                    <form id="ExamplePluginConfigurationForm">
                        <div class="inputContainer">
                            <label class="inputeLabel inputLabelUnfocused" for="username">Username</label>
                            <input id="username" name="username" type="text" is="emby-input" />
                            <div class="fieldDescription">
                                <a is="emby-linkbutton" class="button-link emby-button" target="_blank" href="http://www.opensubtitles.org/">Register</a>
                            </div>
                        </div>
                        <div class="inputContainer">
                            <label class="inputeLabel inputLabelUnfocused" for="password">Password</label>
                            <input id="password" name="password" type="password" is="emby-input" />
                            <div class="fieldDescription">You can utilize this plugin by editing a library and selecting the Open Subtitles provider.</div>
                        </div>
                        <div>
                            <button is="emby-button" type="submit" class="raised button-submit block emby-button">
                                <span>Save</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <script type="text/javascript">
                var ExamplePluginConfigurationPage = {
                    pluginUniqueId: "eb5d7894-8eef-4b36-aa6f-5d124e828ce1",
                    loadConfiguration: function() {
                        Dashboard.showLoadingMsg();
                        ApiClient.getPluginConfiguration(ExamplePluginConfigurationPage.pluginUniqueId).then(function (config) {
                            var page = $.mobile.activePage;
                            $('#username', page).val(config.Username).change();
                            $('#password', page).val(config.Password).change();
                            Dashboard.hideLoadingMsg();
                        });
                    },
                    saveConfiguration: function() {
                        Dashboard.showLoadingMsg();
                        var page = $.mobile.activePage;
                        ApiClient.getPluginConfiguration(ExamplePluginConfigurationPage.pluginUniqueId).then(function(config) {
                            config.Username = $('#username').val();
                            config.Password = $('#password').val();
                            ApiClient.updatePluginConfiguration(ExamplePluginConfigurationPage.pluginUniqueId, config).then(function (result) {
                                Dashboard.processPluginConfigurationUpdateResult(result);
                            });
                        });
                    }
                };

                $('#ExamplePluginConfigurationPage').on('pageshow', function () {
                    ExamplePluginConfigurationPage.loadConfiguration();
                });

                $('#ExamplePluginConfigurationForm').on('submit', function () {
                    ExamplePluginConfigurationPage.saveConfiguration();
                    return false;
                });
            </script>
        </div>
</body>
</html>
